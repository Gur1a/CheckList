# TodoList Backend Service

TodoList ç³»ç»Ÿçš„åç«¯ API æœåŠ¡ï¼ŒåŸºäº Node.js + Express + TypeScript + MySQL æ„å»ºã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18
- MySQL 8.0+
- npm æˆ– yarn

### å®‰è£…ä¾èµ–

```bash
npm install
```

### ç¯å¢ƒé…ç½®

å¤åˆ¶ `.env.example` å¹¶é‡å‘½åä¸º `.env`ï¼Œç„¶åé…ç½®ç›¸åº”çš„ç¯å¢ƒå˜é‡ï¼š

```bash
cp .env.example .env
```

### å¯åŠ¨æœåŠ¡å™¨

#### å¼€å‘æ¨¡å¼
```bash
# æ–¹å¼1: ç›´æ¥å¯åŠ¨ (æ¨è)
npm run dev

# æ–¹å¼2: ä½¿ç”¨TypeScriptå¯åŠ¨è„šæœ¬
npm run dev:start
```

#### ç”Ÿäº§æ¨¡å¼
```bash
# æ„å»ºé¡¹ç›®
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

#### API æµ‹è¯•
```bash
npm run test:api
```

## ğŸ“‹ å¯ç”¨è„šæœ¬

| è„šæœ¬ | æè¿° |
|------|------|
| `npm run dev` | å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (çƒ­é‡è½½) |
| `npm run dev:start` | ä½¿ç”¨TypeScriptå¯åŠ¨è„šæœ¬å¯åŠ¨å¼€å‘æœåŠ¡å™¨ |
| `npm run build` | æ„å»ºç”Ÿäº§ç‰ˆæœ¬åˆ° `dist/` ç›®å½• |
| `npm start` | å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨ |
| `npm run test` | è¿è¡Œå•å…ƒæµ‹è¯• |
| `npm run test:api` | è¿è¡ŒAPIåŠŸèƒ½æµ‹è¯• |
| `npm run type-check` | TypeScriptç±»å‹æ£€æŸ¥ |
| `npm run clean` | æ¸…ç†æ„å»ºæ–‡ä»¶ |

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
backend/
â”œâ”€â”€ config/              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ database.ts     # æ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ socket.js       # Socket.ioé…ç½®
â”œâ”€â”€ middleware/          # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ auth.ts         # è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ errorHandler.ts # é”™è¯¯å¤„ç†ä¸­é—´ä»¶
â”‚   â””â”€â”€ logger.ts       # æ—¥å¿—ä¸­é—´ä»¶
â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ User.ts         # ç”¨æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ Task.ts         # ä»»åŠ¡æ¨¡å‹
â”‚   â”œâ”€â”€ Project.ts      # é¡¹ç›®æ¨¡å‹
â”‚   â”œâ”€â”€ Board.ts        # çœ‹æ¿æ¨¡å‹
â”‚   â”œâ”€â”€ History.ts      # å†å²è®°å½•æ¨¡å‹
â”‚   â””â”€â”€ index.ts        # æ¨¡å‹å¯¼å‡º
â”œâ”€â”€ routes/             # è·¯ç”±å®šä¹‰
â”‚   â””â”€â”€ auth.ts         # è®¤è¯è·¯ç”±
â”œâ”€â”€ dist/               # æ„å»ºè¾“å‡ºç›®å½•
â”œâ”€â”€ index.ts            # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ server.ts           # æœåŠ¡å™¨é…ç½®
â”œâ”€â”€ start-dev.ts        # å¼€å‘å¯åŠ¨è„šæœ¬
â”œâ”€â”€ run.ts              # ä¾¿æ·è¿è¡Œè„šæœ¬
â”œâ”€â”€ test-api.js         # APIæµ‹è¯•è„šæœ¬
â””â”€â”€ package.json        # é¡¹ç›®é…ç½®
```

## ğŸ”§ å…¥å£æ–‡ä»¶è¯´æ˜

### ä¸»å…¥å£æ–‡ä»¶
- **`index.ts`** - é¡¹ç›®ä¸»å…¥å£ï¼Œè´Ÿè´£ç¯å¢ƒæ£€æŸ¥å’Œåº”ç”¨å¯åŠ¨
- **`server.ts`** - ExpressæœåŠ¡å™¨é…ç½®å’Œä¸­é—´ä»¶è®¾ç½®

### å¯åŠ¨è„šæœ¬
- **`start-dev.ts`** - TypeScriptç‰ˆæœ¬çš„å¼€å‘å¯åŠ¨è„šæœ¬
- **`run.ts`** - ä¾¿æ·çš„å¤šæ¨¡å¼å¯åŠ¨è„šæœ¬

## ğŸŒ API ç«¯ç‚¹

### è®¤è¯ç›¸å…³
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•  
- `GET /api/auth/verify` - éªŒè¯token
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º

### ç³»ç»Ÿç›¸å…³
- `GET /api/health` - å¥åº·æ£€æŸ¥
- `GET /api` - APIæ–‡æ¡£

## ğŸ”’ ç¯å¢ƒå˜é‡

```bash
# æœåŠ¡å™¨é…ç½®
NODE_ENV=development
PORT=5000
CLIENT_URL=http://localhost:3000

# MySQLæ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_NAME=todolist_sys
DB_USER=your_username
DB_PASSWORD=your_password

# JWTé…ç½®
JWT_SECRET=your-super-secret-jwt-key
JWT_EXPIRES_IN=7d
```

## ğŸš¦ å¯åŠ¨æµç¨‹

1. **ç¯å¢ƒæ£€æŸ¥** - éªŒè¯å¿…è¦çš„ç¯å¢ƒå˜é‡
2. **æ•°æ®åº“è¿æ¥** - è¿æ¥MySQLæ•°æ®åº“
3. **æ¨¡å‹åŒæ­¥** - åŒæ­¥æ•°æ®è¡¨ç»“æ„ (å¼€å‘ç¯å¢ƒ)
4. **ä¸­é—´ä»¶åŠ è½½** - åŠ è½½è®¤è¯ã€æ—¥å¿—ç­‰ä¸­é—´ä»¶
5. **è·¯ç”±æ³¨å†Œ** - æ³¨å†ŒAPIè·¯ç”±
6. **æœåŠ¡å™¨å¯åŠ¨** - å¯åŠ¨HTTPæœåŠ¡å™¨å’ŒSocket.io

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```
   ç¡®ä¿MySQLæœåŠ¡å·²å¯åŠ¨
   æ£€æŸ¥.envæ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®
   ç¡®ä¿æ•°æ®åº“ç”¨æˆ·æœ‰è¶³å¤Ÿæƒé™
   ```

2. **ç«¯å£è¢«å ç”¨**
   ```
   ä¿®æ”¹.envæ–‡ä»¶ä¸­çš„PORTå€¼
   æˆ–è€…å…³é—­å ç”¨5000ç«¯å£çš„å…¶ä»–ç¨‹åº
   ```

3. **TypeScriptç¼–è¯‘é”™è¯¯**
   ```
   npm run type-check  # æ£€æŸ¥ç±»å‹é”™è¯¯
   npm run clean       # æ¸…ç†æ„å»ºæ–‡ä»¶
   npm run build       # é‡æ–°æ„å»º
   ```

## ğŸ“ æ—¥å¿—

- å¼€å‘ç¯å¢ƒï¼šå½©è‰²æ§åˆ¶å°è¾“å‡º
- ç”Ÿäº§ç¯å¢ƒï¼šå†™å…¥ `logs/` ç›®å½•
- æ—¥å¿—çº§åˆ«ï¼šERROR, WARN, INFO, DEBUG

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡ŒAPIæµ‹è¯•
npm run test:api

# æµ‹è¯•ç‰¹å®šæ¥å£
curl http://localhost:5000/api/health
```

## ğŸ“š æŠ€æœ¯æ ˆ

- **Node.js** - JavaScriptè¿è¡Œç¯å¢ƒ
- **Express.js** - Webæ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨çš„JavaScript
- **MySQL** - å…³ç³»å‹æ•°æ®åº“
- **Sequelize** - ORMæ¡†æ¶
- **JWT** - èº«ä»½è®¤è¯
- **Socket.io** - å®æ—¶é€šä¿¡
- **bcryptjs** - å¯†ç åŠ å¯†